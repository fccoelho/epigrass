
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Using Epigrass {#using} &#8212; Epigrass 2.6.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Analysis" href="analysis.html" />
    <link rel="prev" title="Epidemic Models" href="intromodels.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="using-epigrass-using">
<h1>Using Epigrass {#using}<a class="headerlink" href="#using-epigrass-using" title="Permalink to this headline">¶</a></h1>
<p>To simulate an epidemic process in Epigrass, the user needs to have in
hand at least three files: Two files containing the site and edge data
and a third file which is a script that defines what it is to be done.
Here we go through each one of them in detail. The last part of this
chapter is a step-by step guide the Graphical User Interface (GUI).</p>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>### Site data file</p>
<p>See below an example of the content of a site file for a network of 10
cities. Each line corresponds to a site (except the first line which is
the title). For each site, it is declared, in this order: its <em>spatial
location</em> in the form of a pair of coordinates ([X,Y]); a site
$name$ to be used in the output; the site’s population; the site
geocode (an arbitrary unique number which is used internally by
Epigrass).</p>
<p>::: {.tabularcolumns}
cc
::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X</span>   <span class="n">Y</span>   <span class="n">City</span>      <span class="n">Pop</span>       <span class="n">Geocode</span>
<span class="o">---</span> <span class="o">---</span> <span class="o">---------</span> <span class="o">---------</span> <span class="o">---------</span>
<span class="mi">1</span>   <span class="mi">4</span>   \<span class="s2">&quot;N1</span><span class="se">\&quot;</span><span class="s2">    1000000   1</span>
<span class="mi">2</span>   <span class="mi">4</span>   \<span class="s2">&quot;N2</span><span class="se">\&quot;</span><span class="s2">    100000    2</span>
<span class="mi">3</span>   <span class="mi">4</span>   \<span class="s2">&quot;N3</span><span class="se">\&quot;</span><span class="s2">    1000      3</span>
<span class="mi">4</span>   <span class="mi">4</span>   \<span class="s2">&quot;N4</span><span class="se">\&quot;</span><span class="s2">    1000      4</span>
<span class="mi">5</span>   <span class="mi">4</span>   \<span class="s2">&quot;N5</span><span class="se">\&quot;</span><span class="s2">    1000      5</span>
<span class="mi">1</span>   <span class="mi">3</span>   \<span class="s2">&quot;N6</span><span class="se">\&quot;</span><span class="s2">    100000    6</span>
<span class="mi">2</span>   <span class="mi">3</span>   \<span class="s2">&quot;N7</span><span class="se">\&quot;</span><span class="s2">    1000      7</span>
<span class="mi">3</span>   <span class="mi">3</span>   \<span class="s2">&quot;N8</span><span class="se">\&quot;</span><span class="s2">    100000    8</span>
<span class="mi">4</span>   <span class="mi">3</span>   \<span class="s2">&quot;N9</span><span class="se">\&quot;</span><span class="s2">    100000    9</span>
<span class="mi">5</span>   <span class="mi">3</span>   \<span class="s2">&quot;N10</span><span class="se">\&quot;</span><span class="s2">   1000      10</span>
<span class="mi">1</span>   <span class="mi">2</span>   \<span class="s2">&quot;N11</span><span class="se">\&quot;</span><span class="s2">   1000      11</span>
</pre></div>
</div>
<p>In this example, the first site is located at <em>[X,Y]=[1,4]</em>, it is
named N1, its population is 1000000 and its geocode is 1. This is
minimum configuration of a site data file and it must contains this
information in exactly this order.</p>
<p>In some situations, the user may want to add other attributes to the
sites (different transmission parameters, or vaccine coverage or initial
conditions for simulations). This information is provided by adding new
columns to the minimum file. For example, if one wishes to add
information on the vaccine coverage in cities N1 to N10 ($vac$) as
well as information about average temperature (which hypothetically
affects the transmission of the disease), the file becomes:</p>
<blockquote>
<div><p>X   Y   City      Pop       Geocode   Vac    Temp
— — ——— ——— ——— —— ——
1   4   “N1”    1000000   1         0.9    32
2   4   “N2”    100000    2         0.88   29
3   4   “N3”    1000      3         0.7    25
4   4   “N4”    1000      4         0.2    34
5   4   “N5”    1000      5         0      26
1   3   “N6”    100000    6         0      27
2   3   “N7”    1000      7         0      31
3   3   “N8”    100000    8         0      30
4   3   “N9”    100000    9         0      24
5   3   “N10”   1000      10        0      31</p>
</div></blockquote>
<p>During the simulation, each site object receives these informations and
store them in appropriate variables that can be used later during model
specification. Population is stored in the variable <em>N</em>; while the extra
columns (those beyond the geocode) are stored in a tuple named
<em>{values</em>. For example, for the city <em>N1</em>, we have <em>N = 1000000</em> and
<em>values=[0.9,32]</em>. During model specification, we may use <em>N</em> to
indicate the population size and/or we can use <em>values[0]</em> to indicate
the level of vaccination of that city and <em>values[1]</em> to indicate the
temperature.</p>
<p>It is up to the user, to know what means the elements of the tuple
<em>values</em>. Note that the first element of the tuple has index 0,the
second one has index 1 and so on.</p>
<p>When using real data, one may wish to use actual geocodes and
coordinates. For example, for a network of Brazilian cities, one may
build the following file:</p>
<blockquote>
<div><p>latitude    longitude   local          pop      geocode
———– ———– ————– ——– ———–
-16:19:41   -48:57:10   ANAPOLIS       280164   520110805
-10:54:32   -37:04:03   ARACAJU        461534   280030805
-21:12:27   -50:26:24   ARACATUBA      164449   350280405
-18:38:44   -48:11:36   ARAGUARI       92748    310350405
-21:13:17   -43:46:12   BARBACENA      103669   310560805
-22:32:53   -44:10:30   BARRA_MANSA   165134   330040705
-20:33:11   -48:34:11   BARRETOS       98860    350550005
-26:54:55   -49:04:15   BLUMENAU       241943   420240405
-22:57:09   -46:32:30   B.PAULISTA     111091   350760505</p>
</div></blockquote>
<p>In this file, the coordinates are the actual geographical latitude and
longitude coordinates. This information is important when using Epigrass
with a map in shapefile format. The geocode is also the official geocode
of these localities (the same one used in the shapefile). Despite the
cumbersome size of the number, it may be worth using it because
demographic official databases are often linked by this number.</p>
<p>### Edge data file</p>
<p>The edge data file contains all the direct links between sites. Each
line in the file (except for the first, which is the header) corresponds
to an edge. For each edge (or link) one must specify (in this order):
the <em>names of the sites</em> connected by that edge; the <em>number of
individuals traveling from source to destination</em>; the <em>number of
individuals travelling from destination to source</em> per time step; the
<em>distance or length</em> of the edge. At last, the file must contain, in the
fifth and sixth columns, the <em>geocodes</em> of the source and destination
sites*. This is very important as the graph is built internally
connecting sites through edges and this is done based on geocode info.</p>
<p>::: {.warning}
::: {.admonition-title}
Warning
::</p>
<p>It is required that the order of columns is kept the same.
::</p>
<p>See below the list of the 8 edges connecting the sites <em>N1</em> to <em>N10</em>.
Let’s look the first one, as an example. It links <em>N1</em> to <em>N2</em>. Through
this link passes 11 individuals backwards and forwards per time step (a
day, for example). This edge has length 1 (remember that <em>N1</em> is at
[X,Y]=[1,1] and <em>N2</em> is at [X,Y]=[1,2], so the distance between
them is 1). The last two columns show the geocode of <em>N1</em> (geocode 1)
and the geocode of <em>N2</em> (geocode 2).</p>
<blockquote>
<div><p>Source   Dest   flowSD   flowDS   Distance   geoSource   geoDest
——– —— ——– ——– ———- ———– ———
N1       N2     11       11       1          1           2
N2       N4     0.02     0.02     1          3           4
N3       N8     1.01     1.01     1          3           8
N4       N9     1.01     1.01     1          4           9
N5       N10    0.02     0.02     1          5           10
N6       N5     1.01     1.01     1          7           8
N7       N10    1.01     1.01     1          7           8
N9       N10    1.01     1.01     1          9           10</p>
</div></blockquote>
<p>Note that it doesn’t matter which site is considered a Source and which
one is considered a Destination. I.e., if there is a link between <em>A</em>
and <em>B</em>, one may either named <em>A</em> as source and <em>B</em> as destination, or
the other way around.</p>
<p>If the edge represents a road or a river, one may use the actual metric
distance as length. If the edge links arbitrary localities, one may opt
to use euclidean distance, calculated from the <em>x</em> and <em>y</em> coordinates
(using Pythagoras theorem).</p>
</div>
<div class="section" id="specifying-a-model-the-script">
<h2>Specifying a model: the script<a class="headerlink" href="#specifying-a-model-the-script" title="Permalink to this headline">¶</a></h2>
<p>Once the user has specified the two data files, the next step is to
define the model to be executed. This is done in the .epg script file.
The <a href="#id1"><span class="problematic" id="id2">`</span></a>.epg`{.interpreted-text role=”file”} script is a text file and can
be edited with any editor (not word processor). This script must be
prepared with care.</p>
<p>The best way to write down your own .epg is to edit an already existing
.epg file. So, open Epigrass, choose an .epg file and click on the
<a href="#id3"><span class="problematic" id="id4">`</span></a>Edit`{.interpreted-text role=”guilabel”} button. Your favorite editor
will open and you can start editing. Don’t forget to save it as a new
file in your working directory. Of course, there is an infinite number
of possibilities regarding the elaboration of the script. It all depends
on the goals of the user.</p>
<p>::: {.note}
::: {.admonition-title}
Note
::</p>
<p>Another way to edit an .epg file is to open it whith the graphical
editor provided with Epigrass. Just type
<a href="#id5"><span class="problematic" id="id6">`</span></a>epgeditor yourmodel.epg`{.interpreted-text role=”file”}.
::</p>
<p>For the beginner, we suggest him/her to take a look at the .epg files in
the demo directory. They are all commented and may help the user in
getting used with Epigrass language and capabilities.</p>
<p>Some hints to be successful when editing your <a href="#id7"><span class="problematic" id="id8">`</span></a>.epg`{.interpreted-text
role=”file”}:</p>
<ul class="simple">
<li><p>All comments in the script are preceded by the symbol #. These
comments may be edited by the user as he/she wishes and new lines
may be added at will. Don’t forget, however, to place the symbol #
in every line corresponding to a comment.</p></li>
<li><p>The script is divided into a few parts. These parts have capital
letter titles within brackets. Don’t touch them!</p></li>
<li><p>Don’t remove any line that is <em>not</em> a comment. See below how to
appropriately edit these command lines.</p></li>
</ul>
<p>Let’s take a look now at each part of a script (this is the script
<a href="#id9"><span class="problematic" id="id10">`</span></a>.epg`{.interpreted-text role=”file”} demo file):</p>
<p>::: {.warning}
::: {.admonition-title}
Warning
::</p>
<p>All variables defined in a <a href="#id11"><span class="problematic" id="id12">`</span></a>.epg`{.interpreted-text role=”file”} are
<strong>case-insensitive</strong>. Consider this fact when naming your model’s
variables.
::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Part 1: THE WORLD</span>
</pre></div>
</div>
<p>The first section of the script is titled: THE WORLD. An example of its
content is shown:</p>
<blockquote>
<div><p>shapefile = [‘riozonas_LatLong.shp’,’nome_zonas’,’zona_trafe’]
edges = edges.csv
sites = sites.csv
encoding =</p>
</div></blockquote>
<p>where,</p>
<p><strong>shapefile</strong></p>
<dl class="simple">
<dt>:   Is a list with 3 elements: the first is the path, relative to the</dt><dd><p>working directory, of the shapefile file; the second is the
variable, in the shapefile, which contains the names of the
localities (polygons of the map); the third and last is the
variable, in the shapefile, which contains the geocode of the
localities. If you don’t have a map for you simulation, leave the
list empty: <em>location = []</em> ).</p>
</dd>
</dl>
<p><strong>edges</strong></p>
<dl class="simple">
<dt>:   This is the name of the .CSV (comma-separated-values) file</dt><dd><p>containing the list of edges and their attributes.</p>
</dd>
</dl>
<p><strong>sites</strong></p>
<dl class="simple">
<dt>:   This is the name of the .CSV file containing the list of sites and</dt><dd><p>their attributes.</p>
</dd>
</dl>
<p><strong>encoding</strong></p>
<dl class="simple">
<dt>:   This is the encoding used in your sites and edges files. This is</dt><dd><p>very important when you use location names which include non-ascii
characters. The default encoding is <em>latin-1</em>. If you use any other
encoding, please specify it here. Example: <em>utf-8</em>.</p>
</dd>
</dl>
<p>::: {.note}
::: {.admonition-title}
Note
::</p>
<p>All paths in the <a href="#id13"><span class="problematic" id="id14">`</span></a>.epg`{.interpreted-text role=”file”} file are relative
to the working directory.
::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Part 2: EPIDEMIOLOGICAL MODEL</span>
</pre></div>
</div>
<p>This is the main part of the script. It defines the epidemiological
model to be run. The script reads:</p>
<blockquote>
<div><p>modtype = SIR</p>
</div></blockquote>
<p>Here, the type of epidemiological model is defined, in this case is a
deterministic <em>SIR</em> model. Epigrass has some built-in models:</p>
<blockquote>
<div><p>Name                                       Determ.     Stochastic
—————————————— ———– ————–
Susceptible-Infected-Recovered             <em>SIR</em>       <em>SIR_s</em>
Susceptible-Exposed-Infected-Recovered     <em>SEIR</em>      <em>SEIR_s</em>
Susceptible-Infected-Susceptible           <em>SIS</em>       <em>SIS_s</em>
Susceptible-Exposed-Infected-Susceptible   <em>SEIS</em>      <em>SEIS_s</em>
SIR with fraction with full immunity       <em>SIpRpS</em>    <em>SIpRpS_s</em>
SEIR with fraction with full immunity      <em>SEIpRpS</em>   <em>SEIpRpS_s</em>
SIR with partial immunity for all          <em>SIpR</em>      <em>SIpR_s</em>
SEIR with partial immunity for all         <em>SEIpR</em>     <em>SEIpR_s</em>
SIR with immunity wane                     <em>SIRS</em>      <em>SIRS_s</em></p>
</div></blockquote>
<p>A description of these models can be found in the chapter
<em>Epidemiological modeling</em>. The stochastic models use <em>Poisson</em>
distribution as default for the number of new cases (<em>L(t+1)</em>). Besides
these, the user may define his/her own model and access by the protect
word Custom.</p>
<p>### Part 3: MODEL PARAMETERS</p>
<p>The epidemic model is defined by variables and parameter which require
initialization:</p>
<blockquote>
<div><p>#==============================================================#
#  They can be specified as constants or as functions of global or
#  site-specific variables. Site-specific variables are provided
#  in the sites .csv file. In this file, all columns after the 4th
#  are collected into a values tuple, which can be referenced here
#  as values[0], values[1], values[2], etc.
#   Examples:
#   beta = 0.001
#   beta=values[0] #assigns the first element of values to beta
#   beta=0.001*values[1]
#   beta=0.001*N  # N is a global name for total site population
# Currently, Epigrass requires that parameters beta, alpha, e, r, delta, B, w, p
# be present in the .epg even if they will not be used. Do not erase these lines.
# Just disregard them if they are not useful to you.</p>
<p>beta = 0.4   #transmission coefficient (contact rate * transmissibility)
alpha = 1  # clumping parameter
e = 1   # inverse of incubation period
r = 0.1   # inverse of infectious period
delta = 1  # probability of acquiring full immunity [0,1]
B = 0           # Birth rate
w = 0           # probability of immunity waning [0,1]
p = 0           #</p>
</div></blockquote>
<p>These are the model parameters. Not all parameters are necessary for all
models. For example, <em>e</em> is only required for SEIR-like models. Don’t
remove the line, however because that will cause an error. We recommend
that, if the parameter is not necessary, just add a comment after it as
a reminder that it is not being used by the model.</p>
<p>In some cases, one may wish to assign site-specific parameters. For
example, transmission rate may be different between localities that are
very distant and are exposed to different climate. In this case site
specific variables can be added as new columns to the site file. All
columns after the geocode are packed into a tuple named <em>values</em> and can
be referenced in the order they appear. I.e., the first element of the
tuple is <em>values[0]</em>, the second element is <em>values[1]</em>, the third
element is <em>values[2]</em> and so on.</p>
<p>Part 4: INITIAL CONDITIONS</p>
<p>In this part of the script, the initial conditions are defined. Here,
the number of individuals in each epidemiological state, at the start of
the simulation, is specified. It reads:</p>
<blockquote>
<div><p>#==============================================================#
# Here, the number of individuals in each epidemiological
# state (SEI) is specified. They can be specified in absolute
# or relative numbers.
# N is the population size of each site.
# The rule defined here will be applied equally to all sites.
# For site-specific definitions, use EVENTS (below)
# Examples:
#   S,E,I = 0.8*N, 10, 0.5*N
#   S,E,I = 0.5*N, 0.01*N, 0.05*N
#   S,E,I = N-1, 1, 0
S = N
E = 0
I = 0</p>
</div></blockquote>
<p>Here, <em>N</em> is the total population in a site (as in the datafile for
sites). In this example, we set all localities to the same initial
conditions (all individuals susceptible) and use an event (see below) to
introduce an infectious individual in a locality. The number of
recovered individuals is implicit, as <em>R = N-(S+E+I)</em></p>
<p>Another possibility is to define initial conditions that are different
for each site. For this, the data must be available as extra columns in
the site data file and these columns are referenced to using the
<em>values</em> tuple explained above.</p>
<p>### Part 5: EPIDEMIC EVENTS</p>
<p>The next step is to define events that will occur during the simulation.
These events may be epidemiological (arrival of an infected, for
example) or a public health action (vaccination campaign, for example):</p>
<blockquote>
<div><p>#=============================================================#
#   Specify isolated events.
#   Localities where the events are to take place should be Identified by the geocode, which
#  comes after population size on the sites data file.
#  All coverages must be a number between 0 and 1.
#  Seed : [(‘locality1’s geocode’,epid state, n),(‘locality2’s geocode’, epid state, n),…]
#  N infected cases will be added to locality at time 0.
#  Vaccinate: [(‘locality1’s geocode’, [t1,t2,…], [cov1,cov2,…]),(‘locality2’s geocode’, [t1,t2,…], [cov1,cov2,…])]
#  Quarantine: [(locality1’s geocode,time,coverage), (locality2’s geocode,time,coverage)]
#seed = [(4550601,’ip20’,10)] #santo cristo  #
seed = [(4552110,’ip20’,10)] #pechincha  #
#seed = []
Vaccinate = [] #
Quarantine = []</p>
</div></blockquote>
<p>The events currently implemented are:</p>
<p><strong>seed</strong></p>
<dl class="simple">
<dt>:   One or more infected individual(s) are introduced into a site, at</dt><dd><p>the beggining of the simulation. The notation for a single event is:
<em>Seed = [(‘locality1’s geocode’,epid state, n),(‘locality2’s
geocode’, epid state, n),…]</em>. For example, <em>seed =
[(2,’I’,10)]</em> programs the arrival of 10 infected individuals at
site geocode 2, at time 1.</p>
</dd>
</dl>
<p><strong>Vaccinate</strong></p>
<dl class="simple">
<dt>:   Implements a campaign that vaccinates a fraction of the population</dt><dd><p>in a site, at a pre-defined time-step. For multiple events, the
notation is: <em>[(‘locality1’s geocode’, [t1,t2,…],
[cov1,cov2,…]),(‘locality2’s geocode’, [t1,t2,…],
[cov1,cov2,…])]</em>, where the first element of every triplet is
the geocode of the city, the second element is a list of the time(s)
when the campaign is carried on, and the third element is the
coverage(s). For example, the event <em>[(2,[10],[0.7])]</em> means
that city 2, at time 10, has 70% of its population vaccinated.
Mathematically, it means (in the model), the removal of individuals
from the susceptible to the recovered stage.</p>
</dd>
</dl>
<p><strong>Quarantine</strong></p>
<dl class="simple">
<dt>:   Prevents any individual from leaving a site, starting at <em>t</em>.</dt><dd><p>Currently disabled.</p>
</dd>
</dl>
<p>### Part 6: TRANSPORTATION MODEL</p>
<p>Here, there are two options regarding the movement of infected
individuals from site to site (through the edges). If <em>stochastic = 0</em>,
the process is simulated deterministically. The number of infected
passengers commuting through an edge is a fraction <em>p</em> of the infected
population that is traveling. <em>p</em> is calculated as <em>total
passengers/total population</em>.</p>
<p>If <em>stochastic = 1</em>, the number of passengers is sampled from a Poisson
distribution with parameter given by the expected number of travelling
infectives (calculated as above):</p>
<blockquote>
<div><p>#=========================================================#
# If doTransp = 1 the transportation dynamics will be
# included. Use 0 here only for debugging purposes.
doTransp = 1</p>
<p># Mechanism can be stochatic (1) or deterministic(0).
stochastic = 1
#Average speed of transportation system in km per time step. Enter 0 for instantaneous travel.
#Distance unit must be the same specified in edges files
speed =0 #1440  km/day – equivalent to 60 km/h</p>
</div></blockquote>
<p>That ends the definition of the model.</p>
<p>### Part 7: SIMULATION AND OUTPUT</p>
<p>Now it is time to define some final operational variables for the
simulation:</p>
<blockquote>
<div><p>#==============================================================#
# Number of steps
steps = 50</p>
<p># Output dir. Must be a full path. If empty the output will be generated on the
# same path as the model script.
outdir =</p>
<p># Output file
outfile = simul.dat</p>
<p># Database Output
# SQLout can be 0 (no database output) or 1
SQLout = 1</p>
<p># Report Generation
# The variable report can take the following values:
# 0 - No report is generated.
# 1 - A network analysis report is generated in PDF Format.
# 2 - An epidemiological report is generated in PDF Format.
# 3 - A full report is generated in PDF Format.
# siteRep is a list with site geocodes. For each site in this list, a detailed report is apended to the main report.
report = 0
siteRep = []</p>
<p># Replicate runs
# If replicas is set to an integer(n) larger than zero, the model will be run
# n times and the results will be consolidated before storing.
# RandSeed = 1: the seed will be randomized on each replicate
# RandSeed = 2: seeds are taken sequentially from the site’s file
# Note: Replicate mode automatically turn off report and batch options.
Replicas = 10
RandSeed = 2
#Batch Run
#  list other scripts to be run in after this one. don’t forget the extension .epg
#  model scripts must be in the same directory as this file or provide full path.
#  Example: Batch = [‘model2.epg’,’model3.epg’,’/home/jose/model4.epg’]
Batch = []#[‘sarsDF.epg’,’sarsPA.epg’,’sarsRS.epg’]</p>
</div></blockquote>
<p>where,</p>
<p><strong>step</strong></p>
<p>:   Number of time steps for the simulation.</p>
<p><strong>outdir</strong></p>
<p>:   Directory for data output (currently not in use)</p>
<p><strong>outfile</strong></p>
<dl class="simple">
<dt>:   .csv filename that can be imported into R as a dataframe. This .csv</dt><dd><p>file contains the simulated timeseries for all nodes.</p>
</dd>
</dl>
<p><strong>MySQLout</strong></p>
<dl class="simple">
<dt>:   Use <em>MySQLout = 1</em> if simulated time series are to be stored in</dt><dd><p>MySQL database. Time series of <em>L</em>, <em>S</em>, <em>E</em>, and <em>I</em>, from
simulations, are stored in a MySQL database named <em>epigrass</em>. The
results of each individual simulation is stored in a different table
named after the model’s script name, the date and time the
simulation has been run. For instance, suppose you run a simulation
of a model stored in a file named <a href="#id15"><span class="problematic" id="id16">`</span></a>script.epg`{.interpreted-text
role=”file”}, then at the end of the simulation, a new table in the
epigrass database will be created with the following name:
<em>script_Wed_Jan_26_154411_2005</em>. Thus, the results of multiple
runs from the same model get stored independently.</p>
</dd>
</dl>
<p><strong>Batch=[]</strong></p>
<dl class="simple">
<dt>:   Script files included in this list are executed after the currently</dt><dd><p>file is finished.</p>
</dd>
</dl>
</div>
<div class="section" id="the-graphical-user-interface-gui">
<h2>The Graphical User Interface(GUI)<a class="headerlink" href="#the-graphical-user-interface-gui" title="Permalink to this headline">¶</a></h2>
<p>Epigrass comes with a simple but effective GUI, that allows the user to
control some aspects of the run-time behavior of the system. The Gui can
be invoked by typing texttt{epigrass} in prompt of a console. We suggest
the user to start Epigrass from the same directory where his/her model
definition is located (<a href="#id17"><span class="problematic" id="id18">`</span></a>.csv`{.interpreted-text role=”file”} and
<a href="#id19"><span class="problematic" id="id20">`</span></a>.epg`{.interpreted-text role=”file”} files).</p>
<p>All the information that is entered via the GUI gets stored in a hidden
file called texttt{.epigrassrc} stored in the home folder of the user.
Every time the GUI is invoked, the data stored in the
texttt{.epigrassrc} file is used to fill the forms in the GUI. The gui
is designed as a tabbed notebook with four tabs (Run Options, Settings,
Utilities, and Visualization).</p>
<p>At the bottom of the Gui there are three buttons
<a href="#id21"><span class="problematic" id="id22">`</span></a>Help`{.interpreted-text role=”guilabel”}, <a href="#id23"><span class="problematic" id="id24">`</span></a>Start`{.interpreted-text
role=”guilabel”} and <a href="#id25"><span class="problematic" id="id26">`</span></a>Exit`{.interpreted-text role=”guilabel”}. Their
functions will be explained below. Immediately above the
<a href="#id27"><span class="problematic" id="id28">`</span></a>Run`{.interpreted-text role=”guilabel”} and <a href="#id29"><span class="problematic" id="id30">`</span></a>Exit`{.interpreted-text
role=”guilabel”} buttons, there is a small numeric display that will
display the simulation progress after it has been started.</p>
<p>![First tab of Epigrass GUI. This is where you setup your database
output settings and the model to be run.](epigrass1.png)</p>
<p>### Run Options</p>
<p>The first tab of the GUI, contains a number of variables that, with the
exception of the model script filename, should remain the same for most
simulations you are going to run.</p>
<p>On the top of the first tab is a text box to enter the file name of the
model script (<a href="#id31"><span class="problematic" id="id32">`</span></a>something.epg`{.interpreted-text role=”file”}). By
clicking on the <a href="#id33"><span class="problematic" id="id34">`</span></a>Choose`{.interpreted-text role=”guilabel”} button at
the right of this box, you get a file selection dialog to select your
script file. If you need you can click on the <a href="#id35"><span class="problematic" id="id36">`</span></a>Edit`{.interpreted-text
role=”guilabel”} button below to edit the script file with your favorite
text editor.</p>
<p>Below, you can enter details about the MySQL database that will store
the output of your simulations. Here you can enter the server IP, port,
user and password. On the first time you run the GUI these input boxes
will be filled with the default values for these variables (server on
localhost, port 3306, user epigrass and password epigrass)</p>
<p>### Settings</p>
<p>On the settings page, you can enter personal details such as user name
(To be used in the simulation report), preferred text editor and
preferred PDF reader. The preferred text editor will be used to open
your script from the GUI, when you click on the edit button in the first
tab. The PDF reader specified, will be used to open the report file,
when requested (Utilities tab) and the user manual, when the user clicks
on the help button on the bottom-left corner of the GUI.</p>
<p>On this tab, the language of the GUI can also be selected from a list of
available translations. The effects of language changes will only take
place when the next time the GUI is started.</p>
<p>![Settings tab of the Epigrass GUI. This is wher you configure the
behavior os the GUI. Values set here will be remembered on future
runs.](epigrass2.png)</p>
<p>### Utilities</p>
<p>In the Utilities tab, you can get feed back from the simulator.
Especially during long simulation runs, it is good to know how it is
progressing. During the simulation, text messages regarding the status
of the simulation are written to the text box on the left.</p>
<p>On the right, there is a button for backing up the data base and another
for opening the report generated by the last simulation. Since report
PDFs ar stored in folder directly below the ones on which the simulation
is started, older reports should still be accessible and can be opened
directly by selecting the desired report using the operating system’s
file manager.</p>
<p>### Visualization</p>
<p>The fourth tab of the GUI is the visualization Tab. This tab was
designed for playing animations of any simulation data that is stored in
the database. Pressin the <a href="#id37"><span class="problematic" id="id38">`</span></a>Scan DB`{.interpreted-text role=”guilabel”}
button, causes the available tables in the epigrass database to be
listed in the <em>Simulations stored</em> combo box. The user can then select
one of these simulations to visualize. Once the simulation is selected
the <em>Variable to display</em> combo-box will fill-up with the variables in
the table devoted to the simulation. Select a variable.</p>
<p>![Visualization tab of the Epigrass GUI. The simulations and varibales
to inspect are chosen here.](epigrass4.png)</p>
<p>Once the <a href="#id39"><span class="problematic" id="id40">`</span></a>Start animation`{.interpreted-text role=”guilabel”} button is
pressed, a graphical display window pops up, and the simulation results
will be displayed as a map or a graph (if no map was specified at the
<a href="#id41"><span class="problematic" id="id42">`</span></a>.epg`{.interpreted-text role=”file”}). The animation can be replayed or
moved to any timestep by dragging on the slider under the display
widget. When the user moved the mouse over a polygon in the map(or node
in the graph) its name and geocode appears as a tooltip. Polygons
(nodes) can be selected with the mouse to display their full time series
in the plot below the top display widget.</p>
<p>![](simuview.png)</p>
<p>### Operation</p>
<p>For running simulations, after all the information has been entered and
checked on the first tab of the GUI, you can press the
<a href="#id43"><span class="problematic" id="id44">`</span></a>Run`{.interpreted-text role=”guilabel”} button to start the simulation
or the :guilabel`Exit` button. When the <a href="#id45"><span class="problematic" id="id46">`</span></a>Run`{.interpreted-text
role=”guilabel”} button is pressed, the
<a href="#id47"><span class="problematic" id="id48">`</span></a>~/.epigrassrc`{.interpreted-text role=”file”} file is updated with all
the information entered in the GUI. If the <a href="#id49"><span class="problematic" id="id50">`</span></a>Exit`{.interpreted-text
role=”guilabel”} button is pressed, all information entered since the
last time the <a href="#id51"><span class="problematic" id="id52">`</span></a>Run`{.interpreted-text role=”guilabel”} button was
pressed is lost.</p>
<p>Epigrass also allows running simulation straight from the command line,
with the <strong>epirunner</strong> executable. all you have to do is:</p>
<blockquote>
<div><p>$ epirunner mymodel.epg</p>
</div></blockquote>
<p>and the model will executed with the settings specified in the
<a href="#id53"><span class="problematic" id="id54">`</span></a>~/.epigrassrc`{.interpreted-text role=”file”} file. for help with
<em>epirunner</em>, type:</p>
<blockquote>
<div><p>$ epirunner -h
Usage: epirunner [options] your_model.epg</p>
<dl>
<dt>Options:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">--version</span></kbd></dt>
<dd><p>show program’s version number and exit</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-b <var>&lt;mysql|sqlite|csv&gt;</var></span>, <span class="option">--backend=<var>&lt;mysql|sqlite|csv&gt;</var></span></kbd></dt>
<dd><p>Define which datastorage backend to use</p>
</dd>
<dt><kbd><span class="option">-u <var>DBUSER</var></span>, <span class="option">--dbusername=<var>DBUSER</var></span></kbd></dt>
<dd><p>MySQL user name</p>
</dd>
<dt><kbd><span class="option">-p <var>DBPASS</var></span>, <span class="option">--password=<var>DBPASS</var></span></kbd></dt>
<dd><p>MySQL password for user</p>
</dd>
<dt><kbd><span class="option">-H <var>DBHOST</var></span>, <span class="option">--dbhost=<var>DBHOST</var></span></kbd></dt>
<dd><p>MySQL hostname or IP address</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/MEMO_logo_pq.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Epigrass</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview of Epigrass</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Building and Installing {#install}</a></li>
<li class="toctree-l1"><a class="reference internal" href="intromodels.html">Epidemic Models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using Epigrass {#using}</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-a-model-the-script">Specifying a model: the script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-graphical-user-interface-gui">The Graphical User Interface(GUI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Writing Custom Models {#custom}</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="intromodels.html" title="previous chapter">Epidemic Models</a></li>
      <li>Next: <a href="analysis.html" title="next chapter">Analysis</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2008, Flávio Codeço Coelho.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/using.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>